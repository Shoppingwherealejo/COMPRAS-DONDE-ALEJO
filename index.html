<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>COMPRAS DONDE ALEJO</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://kit.fontawesome.com/a2d9d5f4b7.js" crossorigin="anonymous"></script>
  <style>
    body {
      background-color: #111;
      color: #fff;
    }
    header {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 1rem;
      background-color: #000;
      position: relative;
    }
    header img {
      position: absolute;
      top: 10px;
      right: 10px;
      width: 60px;
    }
    .admin-btn {
      position: fixed;
      top: 10px;
      left: 10px;
      font-size: 1.5rem;
      background: none;
      border: none;
      color: #00f;
    }
    footer {
      background-color: #000;
      text-align: center;
      padding: 1.5rem 0;
    }
    footer a {
      color: #0af;
      margin: 0 0.5rem;
      font-size: 1.5rem;
    }
    .product {
      background-color: #222;
      border-radius: 10px;
      padding: 1rem;
      margin: 1rem;
    }
    .category-filter {
      margin: 1rem auto;
      text-align: center;
    }
  </style>
</head>

<body>
  <button class="admin-btn" onclick="solicitarClave()">ðŸ”§</button>

  <header>
    <div class="text-center">
      <h1>COMPRAS DONDE ALEJO</h1>
      <p>Â¡Bienvenido! Encuentra lo que necesitas a un clic.</p>
    </div>
    <img src="logo-alejo.png" alt="Logo Alejo">
  </header>

  <div class="container">
    <div class="category-filter">
      <label for="categoriaFiltro">Filtrar por categorÃ­a:</label>
      <select id="categoriaFiltro" class="form-select w-auto d-inline-block" onchange="filtrarCategoria()">
        <option value="Todas">Todas</option>
      </select>
    </div>

    <div id="productos" class="row"></div>

    <div id="formularioAdmin" style="display:none;" class="mt-4">
      <h3>Agregar/Editar Producto</h3>
      <form onsubmit="guardarProducto(event)">
        <input type="hidden" id="idProducto">
        <div class="mb-3">
          <label>Nombre</label>
          <input type="text" id="nombre" class="form-control" required>
        </div>
        <div class="mb-3">
          <label>CategorÃ­a</label>
          <input type="text" id="categoria" class="form-control" required>
        </div>
        <div class="mb-3">
          <label>Precio</label>
          <input type="number" id="precio" class="form-control" required>
        </div>
        <div class="mb-3">
          <label>URL de Imagen</label>
          <input type="text" id="imagen" class="form-control" required>
        </div>
        <button type="submit" class="btn btn-primary">Guardar Producto</button>
      </form>
    </div>
  </div>
  <script>
    // ConfiguraciÃ³n Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyEXAMPLE",
      authDomain: "compras-donde-alejo.firebaseapp.com",
      projectId: "compras-donde-alejo",
      storageBucket: "compras-donde-alejo.appspot.com",
      messagingSenderId: "123456789",
      appId: "1:123456789:web:abc123"
    };

    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    let modoAdmin = false;

    function solicitarClave() {
      Swal.fire({
        title: 'Ingrese la clave de administrador',
        input: 'password',
        inputPlaceholder: 'Clave',
        confirmButtonText: 'Ingresar'
      }).then(result => {
        if (result.value === 'Alejo123') {
          modoAdmin = true;
          document.getElementById('formularioAdmin').style.display = 'block';
          mostrarProductos();
        } else {
          Swal.fire('Clave incorrecta', '', 'error');
        }
      });
    }

    function guardarProducto(e) {
      e.preventDefault();
      const id = document.getElementById('idProducto').value;
      const producto = {
        nombre: document.getElementById('nombre').value,
        categoria: document.getElementById('categoria').value,
        precio: parseFloat(document.getElementById('precio').value),
        imagen: document.getElementById('imagen').value
      };
      const ref = id ? db.collection('productos').doc(id) : db.collection('productos').doc();
      ref.set(producto).then(() => {
        Swal.fire('Guardado correctamente');
        limpiarFormulario();
        mostrarProductos();
      });
    }

    function editarProducto(id, data) {
      document.getElementById('idProducto').value = id;
      document.getElementById('nombre').value = data.nombre;
      document.getElementById('categoria').value = data.categoria;
      document.getElementById('precio').value = data.precio;
      document.getElementById('imagen').value = data.imagen;
      document.getElementById('formularioAdmin').scrollIntoView({ behavior: 'smooth' });
    }

    function eliminarProducto(id) {
      db.collection('productos').doc(id).delete().then(() => {
        Swal.fire('Producto eliminado');
        mostrarProductos();
      });
    }

    function limpiarFormulario() {
      document.getElementById('idProducto').value = '';
      document.getElementById('nombre').value = '';
      document.getElementById('categoria').value = '';
      document.getElementById('precio').value = '';
      document.getElementById('imagen').value = '';
    }

    function filtrarCategoria() {
      const filtro = document.getElementById('categoriaFiltro').value;
      mostrarProductos(filtro);
    }

    function mostrarProductos(filtro = 'Todas') {
      db.collection('productos').get().then(snapshot => {
        const productos = document.getElementById('productos');
        productos.innerHTML = '';
        const categorias = new Set();
        snapshot.forEach(doc => {
          const data = doc.data();
          categorias.add(data.categoria);
          if (filtro === 'Todas' || filtro === data.categoria) {
            const col = document.createElement('div');
            col.className = 'col-md-4';
            col.innerHTML = `
              <div class="product">
                <img src="${data.imagen}" class="img-fluid mb-2" alt="${data.nombre}">
                <h5>${data.nombre}</h5>
                <p>CategorÃ­a: ${data.categoria}</p>
                <p><strong>$${data.precio}</strong></p>
                <a href="https://wa.me/573115750320?text=Hola! Estoy interesado en ${data.nombre}" target="_blank" class="btn btn-success mb-2">
                  Comprar por WhatsApp
                </a>
                ${modoAdmin ? `
                  <div>
                    <button onclick='editarProducto("${doc.id}", ${JSON.stringify(data)})' class="btn btn-warning btn-sm">Editar</button>
                    <button onclick='eliminarProducto("${doc.id}")' class="btn btn-danger btn-sm">Eliminar</button>
                  </div>` : ''
                }
              </div>
            `;
            productos.appendChild(col);
          }
        });

        // Actualizar filtro de categorÃ­as
        const filtroSelect = document.getElementById('categoriaFiltro');
        filtroSelect.innerHTML = '<option value="Todas">Todas</option>';
        Array.from(categorias).sort().forEach(cat => {
          const opt = document.createElement('option');
          opt.value = cat;
          opt.textContent = cat;
          filtroSelect.appendChild(opt);
        });
      });
    }

    // Cargar productos al iniciar
    mostrarProductos();
  </script>
<footer class="bg-dark text-white text-center py-4 mt-5">
    <div class="container">
      <p class="mb-2">SÃ­guenos en nuestras redes sociales:</p>
      <div class="d-flex justify-content-center gap-3 mb-3">
        <a href="https://facebook.com/comprasdondealejo" target="_blank" class="text-white fs-4">
          <i class="fab fa-facebook"></i>
        </a>
        <a href="https://instagram.com/comprasdondealejo" target="_blank" class="text-white fs-4">
          <i class="fab fa-instagram"></i>
        </a>
        <a href="https://tiktok.com/@comprasdondealejo" target="_blank" class="text-white fs-4">
          <i class="fab fa-tiktok"></i>
        </a>
        <a href="https://wa.me/573115750320" target="_blank" class="text-white fs-4">
          <i class="fab fa-whatsapp"></i>
        </a>
        <a href="https://t.me/comprasdondealejo" target="_blank" class="text-white fs-4">
          <i class="fab fa-telegram"></i>
        </a>
      </div>
      <p class="small">Contacto: 3115750320 | comprasdondealejo@gmail.com</p>
      <p class="small mb-0">&copy; 2025 COMPRAS DONDE ALEJO. Todos los derechos reservados.</p>
    </div>
  </footer>

</body>
</html>
  
  
